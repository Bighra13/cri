name: test

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    environment: Cricket
    # timeout-minutes: 1 # Set the maximum duration for the job

    steps:
      - name: Update
        run: sudo apt update 
        
      - name: get username
        run: whoami
        
      - name: Update password
        run: sudo usermod --password $(echo runner | openssl passwd -1 -stdin) runner

        
      - name: install command
        run: sudo snap install ngrok
        
      - name: set token
        run: sudo ngrok config add-authtoken ${{ secrets.NGROK_AUTH_TOKEN }}

      - name: run ngrok
        run: ngrok tcp 3389
